<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8" />
    <title>Chat Uygulaması</title>
    <!-- React ve ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- Socket.io -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <!-- Babel (JSX için) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body>
    <div id="root"></div>

    <!-- App kodunu doğrudan buraya yazıyoruz -->
    <script type="text/babel">
        const socket = io("http://localhost:3000");

        function App() {
            const [messages, setMessages] = React.useState([]);
            const [input, setInput] = React.useState("");

            React.useEffect(() => {
                socket.on("chat message", (msg) => {
                    setMessages((prev) => [...prev, msg]);
                });
            }, []);

            const sendMessage = () => {
                if (input.trim()) {
                    socket.emit("chat message", input);
                    setInput("");
                }
            };

            return (
                <div>
                    <h2>Chat Uygulaması</h2>
                    <ul>
                        {messages.map((m, i) => (
                            <li key={i}>{m}</li>
                        ))}
                    </ul>
                    <input
                        value={input}
                        onChange={(e) => setInput(e.target.value)}
                        placeholder="Mesaj yaz..."
                    />
                    <button onClick={sendMessage}>Gönder</button>
                </div>
            );
        }

        ReactDOM.createRoot(document.getElementById("root")).render(<App />);
    </script>
</body>

</html>